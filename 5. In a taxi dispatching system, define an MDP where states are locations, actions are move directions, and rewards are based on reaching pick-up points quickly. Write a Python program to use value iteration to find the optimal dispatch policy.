import numpy as np
n = 3
gamma = 0.9
pickup = (2, 2)
V = np.zeros((n, n))
actions = [(-1,0),(1,0),(0,-1),(0,1)]
for _ in range(50):
    for i in range(n):
        for j in range(n):
            if (i, j) == pickup:
                continue
            values = []
            for dx, dy in actions:
                ni, nj = i + dx, j + dy
                if 0 <= ni < n and 0 <= nj < n:
                    reward = 10 if (ni, nj) == pickup else -1
                    values.append(reward + gamma * V[ni][nj])
            V[i][j] = max(values)
policy = np.empty((n, n), dtype=str)
moves = ['U', 'D', 'L', 'R']
for i in range(n):
    for j in range(n):
        if (i, j) == pickup:
            policy[i][j] = 'P'
            continue
        best = -1e9
        for k, (dx, dy) in enumerate(actions):
            ni, nj = i + dx, j + dy
            if 0 <= ni < n and 0 <= nj < n:
                reward = 10 if (ni, nj) == pickup else -1
                value = reward + gamma * V[ni][nj]
                if value > best:
                    best = value
                    policy[i][j] = moves[k]
print("Value Function:\n", V)
print("\nOptimal Policy:\n", policy)
